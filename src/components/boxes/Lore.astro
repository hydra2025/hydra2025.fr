---
import Line from "./Line.astro";
---

<div class="lore">
  <div class="box" id="box1">
    <div class="border"></div>
    <Line left="63px" top="13px" width="calc(100% - 76px)" />
    <slot name="top" />
  </div>
  <div class="box" id="box2">
    <div class="border"></div>
    <slot name="left" />
    <Line left="63px" top="calc(100% - 13px)" width="calc(50% - 76px)" />
  </div>
  <div class="box" id="box3">
    <div class="border"></div>
    <Line left="63px" top="13px" width="calc(100% - 76px)" />
    <slot name="right" />
  </div>
</div>

<style>
  .box {
    position: relative;
    padding: 2em;
    background: rgba(var(--color-background-rgb), 0.1);
    backdrop-filter: blur(1em);
    border-radius: 1em;
    box-shadow: 0 0 1em rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(var(--color-text-rgb), 0.1);
    clip-path: polygon(
      50px 0%,
      0% 50px,
      0% calc(100% - 20px),
      20px 100%,
      calc(80% - 10px) 100%,
      80% calc(100% - 10px),
      calc(100% - 30px) calc(100% - 10px),
      100% calc(calc(100% - 10px) - 30px),
      100% 0%,
      50px 0%
    );

  }
  .border {
    position: absolute;
    inset: 0;
    background-color: var(--color-primary);
  }

  .lore {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 1em;
    padding: 0 3em;
  }

  #box1 {
    grid-column: 1 / 3;
    grid-row: 1;
    column-count: 3;

    clip-path: polygon(
      50px 0%,
      0% 50px,
      0% calc(100% - 20px),
      20px 100%,
      calc(80% - 10px) 100%,
      80% calc(100% - 10px),
      calc(100% - 30px) calc(100% - 10px),
      100% calc(calc(100% - 10px) - 30px),
      100% 0%,
      50px 0%
    );
  }
  #box1 .border {
    clip-path: polygon(
      50px 0%,
      0% 50px,
      0% calc(100% - 20px),
      20px 100%,
      calc(80% - 10px) 100%,
      80% calc(100% - 10px),
      calc(100% - 30px) calc(100% - 10px),
      100% calc(calc(100% - 10px) - 30px),
      100% 0%,
      50px 0%,
      calc(3px + calc(50px - calc(3px * 0.7071067811865475))) 3px,
      calc(100% - 3px) 3px,
      calc(100% - 3px)
        calc(
          calc(calc(100% - 10px) - 3px) -
            calc(30px - calc(3px * 0.7071067811865475))
        ),
      calc(calc(100% - 3px) - calc(30px - calc(3px * 0.7071067811865475)))
        calc(calc(100% - 10px) - 3px),
      calc(calc(80% - 3px) + calc(3px * 0.7071067811865475))
        calc(calc(100% - 3px) - 10px),
      calc(calc(80% - 3px) - calc(10px - calc(3px * 0.7071067811865475)))
        calc(100% - 3px),
      calc(3px + calc(20px - calc(3px * 0.7071067811865475))) calc(100% - 3px),
      3px calc(calc(100% - 3px) - calc(20px - calc(3px * 0.7071067811865475))),
      3px calc(3px + calc(50px - calc(3px * 0.7071067811865475))),
      calc(3px + calc(50px - calc(3px * 0.7071067811865475))) 3px
    );
  }

  #box2 {
    grid-row: 2;
    grid-column: 1;
    clip-path: polygon(
      0% 0%,
      0% calc(100% - 50px),
      50px 100%,
      100% 100%,
      100% 0%,
      0% 0%
    );
  }

  #box2 .border {
    clip-path: polygon(
      0% 0%,
      0% calc(100% - 50px),
      50px 100%,
      100% 100%,
      100% 0%,
      0% 0%,
      3px 3px,
      calc(100% - 3px) 3px,
      calc(100% - 3px) calc(100% - 3px),
      calc(3px + calc(50px - calc(3px * 0.7071067811865475))) calc(100% - 3px),
      3px calc(calc(100% - 3px) - calc(50px - calc(3px * 0.7071067811865475))),
      3px 3px
    );
  }

  #box3 {
    grid-row: 2;
    grid-column: 2;
    column-count: 2;
    clip-path: polygon(
      0% 0%,
      0% calc(100% - 20px),
      20px 100%,
      calc(80% - 10px) 100%,
      80% calc(100% - 10px),
      calc(100% - 30px) calc(100% - 10px),
      100% calc(calc(100% - 10px) - 30px),
      100% 0%,
      0% 0%
    );
  }

  #box3 .border {
    clip-path: polygon(
      0% 0%,
      0% calc(100% - 20px),
      20px 100%,
      calc(80% - 10px) 100%,
      80% calc(100% - 10px),
      calc(100% - 30px) calc(100% - 10px),
      100% calc(calc(100% - 10px) - 30px),
      100% 0%,
      0% 0%,
      3px 3px,
      calc(100% - 3px) 3px,
      calc(100% - 3px)
        calc(
          calc(calc(100% - 10px) - 3px) -
            calc(30px - calc(3px * 0.7071067811865475))
        ),
      calc(calc(100% - 3px) - calc(30px - calc(3px * 0.7071067811865475)))
        calc(calc(100% - 10px) - 3px),
      calc(calc(80% - 3px) + calc(3px * 0.7071067811865475))
        calc(calc(100% - 3px) - 10px),
      calc(calc(80% - 3px) - calc(10px - calc(3px * 0.7071067811865475)))
        calc(100% - 3px),
      calc(3px + calc(20px - calc(3px * 0.7071067811865475))) calc(100% - 3px),
      3px calc(calc(100% - 3px) - calc(20px - calc(3px * 0.7071067811865475))),
      3px 3px
    );
  }

  @media screen and (max-width: 768px) {
    .lore {
      grid-template-columns: 1fr;
      padding: 0 1em;
    }

    #box1 {
      grid-column: 1;
      grid-row: 1;
    }

    #box2 {
      grid-column: 1;
      grid-row: 2;
    }

    #box3 {
      grid-column: 1;
      grid-row: 3;
    }
</style>
